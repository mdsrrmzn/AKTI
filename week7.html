<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Week 7</title>
</head>
<body>
    <script>
        // 1. setTimeout
        // Definition: setTimeout is a function that executes a specified function after a set amount of time.


        console.log("Start");

        setTimeout(() => {
            console.log("This message is delayed by 2 seconds");
        }, 2000); // 2000 milliseconds = 2 seconds

        console.log("End");



        //2. setInterval
        // Definition: setInterval repeatedly calls a function at specified intervals.

        // Using setInterval
        let count = 0;

        const intervalId = setInterval(() => {
            count++;
            console.log(`Count: ${count}`);
            
            if (count === 5) {
                clearInterval(intervalId); // Stop the interval after 5 counts
                console.log("Interval cleared");
            }
        }, 1000); // 1000 milliseconds = 1 second



        // 3. Promises
        // Definition: A Promise is an object representing the eventual completion (or failure) of an asynchronous operation and its resulting value.



        // Creating a Promise
        const fetchData = new Promise((resolve, reject) => {
            const success = true; // Simulate a successful fetch

            setTimeout(() => {
                if (success) {
                    resolve("Data fetched successfully!");
                } else {
                    reject("Error fetching data.");
                }
            }, 2000);
        });

        // Using the Promise
        fetchData
            .then(data => console.log(data)) // On success
            .catch(error => console.error(error)); // On error



            //4. Async/Await
            //Definition: Async/Await is a syntax for working with Promises, allowing asynchronous code to be written in a more synchronous style.



            // Async/Await function
            const fetchData = () => {
                return new Promise((resolve, reject) => {
                    setTimeout(() => {
                        resolve("Data fetched successfully!");
                    }, 2000);
                });
            };

            const getData = async () => {
                try {
                    const data = await fetchData(); // Wait for the Promise to resolve
                    console.log(data);
                } catch (error) {
                    console.error(error);
                }
            };

            getData();




            // 5. Fetch API
            // Definition: The Fetch API provides a modern way to make network requests and handle responses.



            // Fetching data using GET
            const fetchUserData = async () => {
                try {
                    const response = await fetch('https://jsonplaceholder.typicode.com/users');
                    const data = await response.json();
                    console.log(data);
                } catch (error) {
                    console.error("Error fetching user data:", error);
                }
            };

            fetchUserData();


            // Example (POST Request):


            const postData = async () => {
                try {
                    const response = await fetch('https://jsonplaceholder.typicode.com/users', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            name: 'John Doe',
                            email: 'john@example.com'
                        })
                    });

                    const data = await response.json();
                    console.log('User created:', data);
                } catch (error) {
                    console.error("Error posting user data:", error);
                }
            };

            postData();


    </script>
</body>
</html>